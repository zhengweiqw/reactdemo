define("wkview:widget/commerce/fengchao/modelStru.js",function(e,r,o){function c(){var e=t.get("WkInfo").DocInfo||{},r=e.title||"";return""===r&&console.error("fc stru got empty query"),r}var t=e("wkcommon:widget/lib/fis/data/data.js"),n=e("wkcommon:widget/ui/js_core/log/log.js"),d="https://wenku.baidu.com",a=0,s=[],f=null,l=!1;o.exports.fetchData=function(e){var r=new $.Deferred;return 0===a?(a=1,$.ajax({url:d+"/common/fc/pc/stru_recom",dataType:"json",data:{url:location.href,query:c()},success:function(o){if(0===o.code){for($.map(o.data,function(o){o.srcId===e&&r.resolve(o.adPlace)});s.length>0;){var c=s.pop();$.map(o.data,function(e){e.srcId===c.srcId&&c.defer.resolve(e.adPlace)})}l=!0,n.xsend(1,101929,{index:1})}else if(1001===o.code){for(n.xsend(1,101929,{index:2}),console.error("fc stru data error");s.length>0;){var c=s.pop();c.defer.reject(o.code)}r.reject(o.code)}else if(1002===o.code)n.xsend(1,101929,{index:3}),console.error("fc stru data error");else if(1003===o.code){for(n.xsend(1,101929,{index:4}),console.warn("fc stru recall failed");s.length>0;){var c=s.pop();c.defer.reject(o.code)}r.reject(o.code)}else{for(n.xsend(1,101929,{index:5}),console.error("fc stru data error");s.length>0;){var c=s.pop();c.defer.reject(o.code)}r.reject(o.code)}a=0},fail:function(){for(n.xsend(1,101929,{index:6}),console.error("fc stru api network error");s.length>0;){var e=s.pop();e.defer.reject(-1)}r.reject(-1)}})):1===a?s.push({defer:r,srcId:e}):2===a&&(l?setTimeout(function(){$.map(f,function(o){o.srcId===e&&r.resolve(o.adPlace)})},0):r.reject(-1)),r}});