define("wkcommon:widget/header/search_box/sug.js",function(e,t,a){var i=e("wkcommon:widget/ui/js_core/log/log.js"),r=function(){this.$searchBox=$("#kw"),this.initValue=this.$searchBox.val(),this.pageFr="",this.preQuery="",this.timeStamper=0,this.cacheFcData=[],this.eid={home:2017110201,search:2017110202,view:2017110203,other:2017110201},this.ctjID={home:101351,search:101352,view:101353},this.init()};r.prototype={init:function(){var e=this,t=location.pathname,a=["search","view","home"];$.each(a,function(a,i){return t.indexOf("/"+i)>-1?(e.pageFr=i,!1):"home"===i?(e.pageFr="home",!1):void 0
}),this.bindEvent()},getFcData:function(e){var t=this,a=$.Deferred(),i=(new Date).getTime();return i-t.timeStamper>100?(t.timeStamper=i,t.requestData(a,e)):a.resolve(t.cacheFcData),a.promise()},requestData:function(e,t){var a=this,i=t.s||[],r=$("#kw").val()||"",n={from:a.pageFr,eid:a.eid[a.pageFr],url:location.href,refer:document.referrer||"",pre_query:i[0]||a.preQuery,query:r};$.ajax({url:"/xpage/interface/pcsug",type:"GET",data:n}).done(function(t){var r=t;r=a.formatData(t),a.preQuery=i[0],a.cacheFcData=r,e.resolve(r)
}).fail(function(){a.preQuery=i[0],e.resolve({})})},formatData:function(e){var t=e.data||{},a=[];if(0===e.status.code){try{t.ad_list.length&&(a=JSON.parse(t.ad_list[0].ad_place_data))}catch(i){}return a}},bindEvent:function(){var e=this;$("body").on("click",".sug-fc",function(){e.$searchBox.val(e.initValue),setTimeout(function(){$(".tangram-suggestion-main").hide()},200)}),$(window).on("fcSugLog",function(t,a){e.sendLog(a)})},sendLog:function(e){var t=this,a=t.ctjID[t.pageFr];i.xsend(1,a,{index:e.index,from:t.pageFr})
}},a.exports=r});