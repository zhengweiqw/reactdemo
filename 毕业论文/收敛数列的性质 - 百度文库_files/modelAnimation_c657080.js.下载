define("wkview:widget/commerce/fengchao/modelAnimation.js",function(e,t,r){function n(){var e=s.get("WkInfo").DocInfo||{},t=e.title||"wenku";return t}function i(e,t,r){0>=t||(r.push(e.splice(0,2)),t--,i(e,t,r))}function o(e){for(var t=0;t<e.length;t++)if(e[t].style&&"idea2408"in e[t].style&&e[t].style.idea2408.images){e[t].style.idea2408.pic_url_items=e[t].style.idea2408.images;var r=e[t].style.idea2408.pic_url_items;if(r&&r.length)for(var n=0;n<r.length;n++)r[n].pic=r[n].image_url}}function c(){var e=new $.Deferred;return 0===g?(g=1,l.getJSON("pcViewFcPercent",{success:function(t){if(f=100*Math.random(),t){for(e.resolve(t,f);v.length>0;){var r=v.pop();r.defer.resolve(t,f)}h=t,w=!0}else{for(;v.length>0;){var r=v.pop();r.defer.reject()}e.reject()}g=2},error:function(){for(;v.length>0;){var t=v.pop();t.defer.reject(-1)}e.reject(-1)}})):1===g?v.push({defer:e}):2===g&&(w?setTimeout(function(){e.resolve(h,f)},0):e.reject(-1)),e}function a(){var e=new $.Deferred;return 0===m?(m=1,$.ajax({url:u+"/common/fc/pc/view_btw",dataType:"json",data:{url:location.href,query:n()},success:function(t){if(0===t.code){var r=[];for(o(t.data.ads),i(t.data.ads,4,r),e.resolve({ads:r,im_time_sign:t.data.im_time_sign});j.length>0;){var n=j.pop();n.defer.resolve({ads:r,im_time_sign:t.data.im_time_sign})}p={ads:r,im_time_sign:t.data.im_time_sign},_=!0}else{for(;j.length>0;){var n=j.pop();n.defer.reject(t.code)}e.reject(t.code)}m=2},fail:function(){for(m=2;j.length>0;){var t=j.pop();t.defer.reject(-1)}e.reject(-1)},error:function(){for(m=2;j.length>0;){var t=j.pop();t.defer.reject(-1)}e.reject(-1)}})):1===m?j.push({defer:e}):2===m&&(_?setTimeout(function(){e.resolve(p)},0):e.reject(-1)),e}var f,s=(e("wkcommon:widget/ui/js_core/log/log.js"),e("wkcommon:widget/lib/fis/data/data.js")),l=e("wkcommon:widget/ui/js_core/xform/xform.js"),d=e("wkcommon:widget/lib/tangram/base/base.js"),u="//wenku.baidu.com",m=0,g=0,v=[],j=[],p=null,h=null,_=!1,w=!1;r.exports.fetchData=function(){var e=new $.Deferred,t=d.cookie.get("fcAdAnimation");return"1"===t?(a().then(function(t){e.resolve(t)}).fail(function(t){e.reject(t)}),e):(c().then(function(t,r){var n=t.fcPercent;n>=r?a().then(function(t){e.resolve(t)}).fail(function(){e.reject()}):e.reject()}).fail(function(t){e.reject(t)}),e)}});