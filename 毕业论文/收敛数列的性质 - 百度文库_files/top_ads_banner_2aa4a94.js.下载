define("wkview:widget/top_ads_banner/top_ads_banner.js",function(t,e,a){var o=t("wkcommon:widget/ui/js_core/xform/xform.js"),i=t("wkcommon:widget/lib/doT/doT.min.js"),n=(t("wkcommon:widget/ui/js_core/login/login.js"),t("wkcommon:widget/lib/fis/data/data.js")),s=t("wkcommon:widget/ui/js_core/log/log.js"),r=t("wkview:widget/common_item/commonUtil/commonUtil.js"),c=n.get("WkInfo")||{},d=c.DocInfo||{},l='<a href="javascript:;" class="top-ads-container top-ads-banner-goto-cashier log-xsend" data-logxsend="[1, 100017]" data-href="{{=it.jumpUrl}}">\n<p class="left-image" style="background: url({{=it.imgUrl}}) no-repeat;"></p>\n<div class="right-info">\n<p class="right-first-para">{{=it[\'first-para\']}}</p>\n<p class="right-second-para">{{=it[\'second-para\']}}</p>\n</div>\n</a>\n',g={ALL:"1",PAY:"2",NON_PAY:"3"},h=function(t){this.$el=$(".top-ads-banner-wrap"),this.crumbs=t.crumbs||"",this.categoryList=this.crumbs.split(","),this.categoryTpl=i.template(l),this.init()};h.prototype={constructor:h,docValueCategory:"1",init:function(){this.rerender(),this.getDataList(),this.bindEvent(),s.xsend(1,101909)},rerender:function(){var t=r.calcualteDocValueType(d),e=r.DOC_VALUE_TYPE;switch(t){case e.PAY_DISCOUNT:case e.PARTNER_NORMAL:case e.PAY_NORMAL:case e.PAY_PACK:this.docValueCategory=g.PAY,this.$el.empty();break;default:this.docValueCategory=g.NON_PAY}},getDataList:function(){var t=this;o.getJSON("top_ads_banner",{success:function(e){if(e&&e.matchDataList&&e.matchDataList.length>0){var a=e.matchDataList,o=t.indexOfTarget(a);-1!==o&&o<a.length&&t.$el.html(t.categoryTpl(a[o]))}}}).always(function(){t.$el.removeClass("hide")})},indexOfTarget:function(t){for(var e=-1,a=this.categoryList.length-1;a>=0;a--)for(var o=0;o<t.length;o++){var i=t[o]||{};if(i.keyword===this.categoryList[a]&&(i.docValueCategory===g.ALL||i.docValueCategory===g.PAY&&this.docValueCategory===g.PAY||i.docValueCategory===g.NON_PAY&&this.docValueCategory===g.NON_PAY))return o}return e},bindEvent:function(){var t=n.get("WkInfo")||{},e=t.DocInfo||{},a=e.docId||0;this.$el.on("click",function(){var t=$(this).find(".top-ads-banner-goto-cashier"),e=t.attr("data-href")+a;T.lang.eventCenter.addEventListener("Login.Success",function(t){T.event.stop(t),window.location.href=e}),window.location.href=e})}},a.exports=h});