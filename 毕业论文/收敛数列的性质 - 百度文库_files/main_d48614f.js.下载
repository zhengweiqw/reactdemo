define("wkview:widget/common_toc/reader_html/page_body/main.js",function(e,t,i){e("wkcommon:widget/ui/lib/async_widget/async_widget.js");var n=e("wkcommon:widget/ui/lib/browser/browser.js"),o=e("wkview:widget/crmAd/crmAd2.js"),d=e("wkview:widget/crm_multi/crm_multi.js"),a=e("wkview:widget/crmAd/zyAd.js"),r=e("wkview:widget/commerce/fengchao/modelAnimation.js"),w=e("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),c=e("wkview:widget/ui/detectImgBlock/hijack.js"),s=e("wkcommon:widget/ui/lib/BigPipe/BigPipe.js"),g=e("wkview:widget/crmAd/crmAd3.js"),l=e("wkview:widget/fengchao_right/fengchao_right.js"),m=e("wkcommon:widget/lib/tangram/base/base.js"),h=e("wkcommon:widget/ui/lib/jquery/jquery.js"),u=e("wkview:widget/ad_xpageForm/xpageForm.js"),f=function(e){h.extend(!0,this.ops,e),this.bindEvent().run()};f.prototype={constructor:f,ops:{docId:"",docTitle:"",flag:1,needShowAd:1,needShowAd2:1,orgName:""},bindEvent:function(){var e=function(){var e=h(".daily-recom-wrap"),t=h(".reader-container").width();e.css("width",t),900>t?e.addClass("small-wrap"):e.removeClass("small-wrap")};return e(),m.lang.eventCenter.addEventListener("Reader.zoomChange",e),this},run:function(){var e=this.ops;if(h(function(){h(".async-widget").widgetAsync({effect:n.ie&&n.ie<8?"show":"slideDown",effect_speed:!1})}),!e.flag)return this;var t=w.detectImgBlock(),i=[];i.push({url:"/browse/widget/viewrecom?pagelets[]=view-like-recom&doc_id="+e.docId,id:"view-like-recom"});var m=function(){this.next=function(){if(i.length){var n=i.shift();s.fetch(n.url,n.id)}else h.event.trigger("orgRightRecon"),h.event.trigger("rightDocLoadEnd");e.needShowAd&&h.when(t).then(h(".other-like-doc").height()>10?function(){new g({ele:h("#guess-like-doc"),pid:7})}:function(){l.init()});new c;if(e.needShowAd2||e.is_tianyancha_doc){var w=new d({title:e.docTitle}),m=function(){var t=(new o({ele:h("#wkad18"),pid:18}),new o({ele:h("#wkad21"),pid:21}),Math.random());a.show2To3({el:h("#wkad21-2"),next:function(){w.show2To3(function(){new g({ele:h("#wkad21-2"),pid:5})},t)}}),navigator.userAgent.indexOf("MSIE 6.0")<0&&w.showDocBtm(function(){new o({ele:h("#wkgg"),pid:3})},t),a.show3To4({el:h("#html-reader-AD-3t4"),next:function(){r.fetchData().then(function(e){e.ads[2].length?(window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-3t4",{im_time_sign:e.im_time_sign,ads:e.ads[2]}),h("#html-reader-AD-3t4").append('<a class="ad-logo"></a>')):a.show3To4Wangmeng()}).fail(function(){a.show3To4Wangmeng()})}}),h("#html-reader-AD-4t5").length>0&&a.show4To5({el:h("#html-reader-AD-4t5"),next:function(){r.fetchData().then(function(e){e.ads[3].length?(window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-4t5",{im_time_sign:e.im_time_sign,ads:e.ads[3]}),h("#html-reader-AD-4t5").append('<a class="ad-logo"></a>')):w.show4To5(t)}).fail(function(){w.show4To5(t)})}}),a.show5To6({el:h("#html-reader-AD-5t6"),next:function(){new u({el:"#html-reader-AD-5t6",orgName:e.orgName})}}),a.showFooter({el:h("#ggbtm"),next:function(){new g({ele:h("#ggbtm"),pid:2})}})};h.when(t).then(function(){m()})}}},f=new m;if(s.on("pagerendercomplete",f.next,this),i.length){var p=i.shift();s.fetch(p.url,p.id)}return this}},i.exports=f});