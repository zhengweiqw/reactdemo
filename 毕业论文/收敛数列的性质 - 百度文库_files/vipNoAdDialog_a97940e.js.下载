define("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js",function(i,n,s){var o=i("wkcommon:widget/lib/doT/doT.min.js"),e=o.template('<div class="vip-no-ad-dialog">\n<div class="pop-up-window"></div>\n<div class="vip-pop-container">\n<div class="pop-container">\n<div class="close-dialog-btn"></div>\n<div class="title">\u5f00\u901aVIP\uff0c\u4eab\u5168\u7ad9\u514d\u5e7f\u544a\u7279\u6743\uff0c\u9650\u65f6\u7acb\u51cf10\u5143!</div>\n<div class="coupon">\n<div class="title">10\u5143VIP\u4ee3\u91d1\u5238</div>\n<div class="count-down-wrap">\n<div class="item hour">\n<i class="h-1"></i>\n</div>\n<div class="item minute">\n<i></i>\n<i></i>\n</div>\n<div class="item second">\n<i></i>\n<i></i>\n</div>\n</div>\n</div>\n<div class="get-coupon-btn">\u9886\u53d6\u4ee3\u91d1\u5238\u5e76\u5f00\u901aVIP\uff0c\u4eab\u7eaf\u51c0\u4f53\u9a8c</div>\n<div class="icon-group">\n<div class="item item-1">\n<i></i>\u4eab\u4e13\u4e1a\u6587\u6863\u4e0b\u8f7d\u7279\u6743</div>\n<div class="item item-2">\n<i></i>\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</div>\n<div class="item item-3">\n<i></i>10W\u7bc7\u6587\u6863\u514d\u8d39\u4e13\u4eab</div>\n</div>\n<div class="toast"></div>\n</div>\n</div>\n</div>'),t=o.template('<div class="vip-no-ad-dialog">\n<div class="pop-up-window"></div>\n<div class="vip-pop-container">\n<div class="pop-container">\n<div class="close-dialog-btn"></div>\n<div class="coupon">\n<div class="title">10\u5143VIP\u4ee3\u91d1\u5238</div>\n<div class="count-down-wrap">\n<div class="item hour">\n<i class="h0"></i>\n</div>\n<div class="item minute">\n<i></i>\n<i></i>\n</div>\n<div class="item second">\n<i></i>\n<i></i>\n</div>\n</div>\n</div>\n<div class="get-coupon-btn">\u9886\u53d6\u4ee3\u91d1\u5238\u5e76\u5f00\u901aVIP\uff0c\u4eab\u7eaf\u51c0\u4f53\u9a8c</div>\n<div class="icon-group">\n<div class="item item-1">\n<i></i>\u8d60\u5171\u4eab\u6587\u6863\u4e0b\u8f7d\u7279\u6743</div>\n<div class="item item-2">\n<i></i>\u4eab\u4e13\u4e1a\u6587\u6863\u4e0b\u8f7d\u7279\u6743</div>\n<div class="item item-3">\n<i></i>\u8d60\u767e\u5ea6\u9605\u8bfbVIP\u7cbe\u54c1\u7248</div>\n</div>\n<div class="toast"></div>\n</div>\n</div>\n</div>'),d=i("wkcommon:widget/ui/js_core/log/log.js"),a=i("wkcommon:widget/node_modules/@baidu/wenku-model-user/index.js"),c=i("wkcommon:widget/lib/fis/data/data.js"),l=c.get("WkInfo"),r=l.PageInfo,v=function(){var i=this;
a.getVipInfo().done(function(n){!r.isLogin||!n||n.isClassicVip||n.isJiaoyuVip||n.isVip||n.isWenkuEduVip||n.isWenkuVip?i.toCashier():i.init()})};v.prototype={constructor:v,init:function(){var i=this;i.timer={},i.tpl=$("body").is(".sf-2111")?t():e(),$(".vip-no-ad-dialog").length<=0&&($("body").append(i.tpl),$(".count-down-wrap .minute i:eq(0)").removeClass().addClass("m3"),$(".count-down-wrap .minute i:eq(1)").removeClass().addClass("m0"),$(".count-down-wrap .second i:eq(0)").removeClass().addClass("s0"),$(".count-down-wrap .second i:eq(1)").removeClass().addClass("s0"),i.setCountDown()),i.bindEvent(),i.setDialogPosition(),$(".vip-no-ad-dialog").show(),i.canSend=!0,d.xsend(1,101785,{type:"show"})
},setCountDown:function(){var i=this,n=29,s=59;i.timer=setInterval(function(){10>s?n>=10?($(".count-down-wrap .minute i:eq(0)").removeClass().addClass("m"+n.toString().substring(0,1)),$(".count-down-wrap .minute i:eq(1)").removeClass().addClass("m"+n.toString().substring(1,2)),$(".count-down-wrap .second i:eq(0)").removeClass().addClass("s0"),$(".count-down-wrap .second i:eq(1)").removeClass().addClass("s"+s),Number(n),Number(s)):($(".count-down-wrap .minute i:eq(0)").removeClass().addClass("m0"),$(".count-down-wrap .minute i:eq(1)").removeClass().addClass("m"+n),$(".count-down-wrap .second i:eq(0)").removeClass().addClass("s0"),$(".count-down-wrap .second i:eq(1)").removeClass().addClass("s"+s),Number(n),Number(s)):n>=10?($(".count-down-wrap .minute i:eq(0)").removeClass().addClass("m"+n.toString().substring(0,1)),$(".count-down-wrap .minute i:eq(1)").removeClass().addClass("m"+n.toString().substring(1,2)),$(".count-down-wrap .second i:eq(0)").removeClass().addClass("s"+s.toString().substring(0,1)),$(".count-down-wrap .second i:eq(1)").removeClass().addClass("s"+s.toString().substring(1,2)),Number(n),Number(s)):($(".count-down-wrap .minute i:eq(0)").removeClass().addClass("m0"),$(".count-down-wrap .minute i:eq(1)").removeClass().addClass("m"+n),$(".count-down-wrap .second i:eq(0)").removeClass().addClass("s"+s.toString().substring(0,1)),$(".count-down-wrap .second i:eq(1)").removeClass().addClass("s"+s.toString().substring(1,2)),Number(n),Number(s)),s--,0>s&&(s=59,n>0?n--:(n=0,clearInterval(i.timer)))
},1e3)},setDialogPosition:function(){var i=$(document).scrollTop(),n=($(window).width()-466)/2,s=($(window).height()-327)/2;$(".vip-pop-container").css({top:s+i,left:n}),$(".pop-up-window").css({height:$(document).height(),width:$(window).width()})},bindEvent:function(){var i=this;return $(".vip-pop-container .close-dialog-btn").on("click",$.proxy(i.closeDialog,i)),$(".vip-pop-container .get-coupon-btn, .vip-pop-container .coupon").on("click",$.proxy(i.goToCashier,i)),$(window).on("scroll",$.proxy(i.setDialogPosition,i)),$(window).on("resize",$.proxy(i.setDialogPosition,i)),this
},closeDialog:function(){$(".vip-no-ad-dialog").hide()},goToCashier:function(){var i=this;if(d.xsend(1,101785,{type:"click"}),i.canSend){var n=$(".vip-pop-container .toast");$.ajax({type:"post",cache:!1,url:"/goods/interface/sendvoucherforvippromo"}).done(function(s){i.canSend=!1,s&&s.status&&0===+s.status.code?n.text("\u9886\u53d6\u6210\u529f!").css("left",(426-n.width())/2).fadeIn(0,function(){setTimeout(function(){n.fadeOut(0,i.toCashier())},3e3)}):s&&s.status&&1===+s.status.code?n.text("\u5df2\u9886\u53d6!").css("left",(426-n.width())/2).fadeIn(0,function(){setTimeout(function(){n.fadeOut(0,i.toCashier())
},3e3)}):n.text("\u9886\u53d6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5").css("left",(426-n.width())/2).fadeIn(0,function(){setTimeout(function(){n.fadeOut(0),location.reload()},3e3)})})}},toCashier:function(){location.href="/cashier/browse/vipcashier?cashier_code=adfree_joinvip"}},s.exports=v});